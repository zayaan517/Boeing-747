var amzntqcsm;(amzntqcsm=amzntqcsm||{}).errorCodes={SLOT_INSIDE_UNFRIENDLY_FRAME:1,UNSUPPORTED_BROWSER:2,ERROR_SENDING_PIXEL:3,INVALID_API:4,MALFORMED_URL:5},amzntqcsm.PST_ERROR_CODE={UNSUPPORTED_FEATURE_POLICY:"UNSUPPORTED_FEATURE_POLICY",FEATURE_POLICY_EXCEPTION:"FEATURE_POLICY_EXCEPTION",TOKEN_NOT_PRESENT:"TOKEN_NOT_PRESENT",TUNGSTEN_LOGGING_ERROR:"TUNGSTEN_LOGGING_ERROR",HAS_RR_API_FAILURE:"HAS_RR_API_FAILURE",HAS_TOKEN_API_FAILURE:"HAS_TOKEN_API_FAILURE",TRS_RESPONSE_STATUS_NOT_200:"TRS_RESPONSE_STATUS_NOT_200",REDEMPTION_ERROR:"REDEMPTION_ERROR",SEND_RR_PAYLOAD_ERROR:"SEND_RR_PAYLOAD_ERROR"},amzntqcsm.errors=[],amzntqcsm.errorMessages=[],amzntqcsm.exceptions={},amzntqcsm.reportErrors=function(t){for(var n=0;n<amzntqcsm.errors.length;n++)if(-1===amzntqcsm.errorMessages.indexOf(amzntqcsm.errors[n])){amzntqcsm.errorMessages.push(amzntqcsm.errors[n]);var e='{"adViewability":[{"error": {"m": "'+amzntqcsm.errors[n]+'"}}], "c": "viewability", "api": "'+amzntqcsm.api+'", "error": 1}';amzntqcsm.sendPixel(t,e,"")}amzntqcsm.errors=[],amzntqcsm.detachAllHandlers&&amzntqcsm.detachAllHandlers()},amzntqcsm.sendPixel=function(t,n,e){n=n.replaceAll("%","<per>"),n=encodeURIComponent(n);var r="?";void 0!==e&&""!==e?t+=e:(t+="?p=",r="&"),(new Image).src=t+n+r+"cb="+Math.round(1e7*Math.random())},function(){var d=/\(?([^\s]*):(\d+):\d+\)?/,l=/.*@(.*):(\d*)/;function g(t,n){try{return t[n]}catch(t){return""}}amzntqcsm.constructErrorMessage=function(t,n){if(n=n||{},!t)return{};t.m&&t.m.message&&(t=t.m);var e,r,a,s,o,i,m={m:function(t,n){var e=n.m||n.message||"";t.m&&t.m.message?e+=t.m.message:t.m&&t.m.target&&t.m.target.tagName?e+="Error handler invoked by "+t.m.target.tagName+" tag":t.m?e+=t.m:t.message?e+=t.message:e+="Unknown error";return e}(t,n),c:t.c?""+t.c:t.c,s:[],l:t.l||t.line||t.lineno||t.lineNumber,name:t.name,type:t.type},c=0,u=0;if((e=t.stack||(t.err?t.err.stack:""))&&e.split)for(r=e.split("\n");c<r.length&&m.s.length<20;)(a=r[c++])&&m.s.unshift((i=a)?i.replace(/^\s+|\s+$/g,""):i);else for(s=g(t.args||arguments,"callee"),u=c=0;s&&c<20;)o=256,s.skipTrace||(a=s.toString())&&a.substr&&(o=0===u?1024:o,o=1===u?512:o,m.s.unshift(a.substr(0,o)),u++),s=g(s,"caller"),c++;return!m.f&&0<m.s.length&&function(t){if(t&&t.s){var n,e=0<t.s.length?t.s[0]:"",r=1<t.s.length?t.s[1]:"";e&&(n=e.match(l)),n&&3===n.length||!r||(n=r.match(d)),n&&3===n.length&&(t.f=n[1],t.l=n[2])}}(m),m}}(),amzntqcsm.exceptions.invalidModuleException=function(t){this.value=t,this.message="does not conform to the expected format of a module",this.toString=function(){return this.value+this.message}},amzntqcsm.exceptions.invalidStringException=function(t){this.value=t,this.message="should be a string. Pixel Queue expects a string.",this.toString=function(){return this.value+this.message}},amzntqcsm.getModules=function(t,n,e){return{utils:{default:!0,params:[],global:!0},pixelQueue:{default:!0,params:[n]},fraudMetrics:{params:[e]},domainMask:{params:[]},funcSpoofing:{params:[]},headlessBrowser:{params:[e]},privateStateToken:{params:[]}}},amzntqcsm.log=function(t){try{-1!==window.location.href.indexOf("csm_debug_mode")&&window.console&&window.console.log(t)}catch(t){t.message&&amzntqcsm.errors.push(t.message)}},amzntqcsm.loadModules=function(t,n){try{for(var e=0;e<n.length;e++){var r=n[e].name,a=n[e].params||[];if(window.performance&&window.performance.mark&&"function"==typeof window.performance.mark&&window.performance.mark("loadStart"+r+t),"[object Array]"!==Object.prototype.toString.call(a)&&amzntqcsm.log("Params passed in the amzntqcsm.loadModules methods must be an array"),amzntqcsm[r]){if(void 0===amzntqcsm[r].shortName)throw new amzntqcsm.exceptions.invalidModuleException("Module shortName not defined for module "+r+". ");a.unshift(t),amzntqcsm[r].init.apply(amzntqcsm[r],a),amzntqcsm.log("Initiated "+r+" module"),window.performance&&window.performance.mark&&"function"==typeof window.performance.mark&&(window.performance.mark("loadEnd"+r+t),window.performance.measure("lt"+amzntqcsm[r].shortName+t,"loadStart"+r+t,"loadEnd"+r+t))}else amzntqcsm.log("Undefined module "+r)}}catch(t){t.message&&amzntqcsm.errors.push(t.message)}},amzntqcsm.define=function(t){try{for(var n=Array.prototype.slice.call(arguments),e=n[0],r=2<n.length?n[1]:[],a=n[n.length-1],s=[],o=0,i=r.length;o<i;o++)s.push("string"==typeof(m=r[o])?amzntqcsm[m]:m);amzntqcsm[e]=a.apply(a,s)}catch(t){t.message&&amzntqcsm.errors.push(t.message)}var m},amzntqcsm.define("utils",[],function(){var t,s={shortName:"ut"};return s.init=function(t){amzntqcsm.log("Initializing utils for "+t)},s.getPixelID=(t=null,function(){return null===t&&(t=Math.random().toString(36).substr(2)),t}),s.detachAllHandlers=function(){for(var t,n=0;n<amzntqcsm.eventHandlers.length;n++)t=amzntqcsm.eventHandlers[n],amzntqcsm.removeEvent(t.elem,t.eventName,t.cb)},s.reportClientError=function(t){var n=t===parseInt(t,10)?'{"m": "'+t+'"}':JSON.stringify(amzntqcsm.constructErrorMessage(t)),e=amzntqcsm.instrURL,r='{"adViewability":[{"error": '+n+'}], "c": "viewability", "api": "'+amzntqcsm.api+'", "error": 1}';amzntqcsm.log("ERROR "+n),-1===amzntqcsm.errorMessages.indexOf(n)&&(amzntqcsm.errorMessages.push(n),amzntqcsm.scrollImitationTimer&&clearInterval(amzntqcsm.scrollImitationTimer),amzntqcsm.isV6?amzntqcsm.sendPixel(e,r,""):(new Image).src=e+r+"?cb="+Math.round(1e7*Math.random()))},s.isPSTTenant=function(t){return t===amzntqcsm.tungstenTenants.pstErrorLoggingEvent||t===amzntqcsm.tungstenTenants.pstRRLoggingEvent},s.getTungstenCSMLoggingFrameworkBaseUrl=function(t){var n=t.indexOf("/");return 0<n?t.substring(0,n):t},s.getTungstenLoggingHost=function(t,n){return s.isPSTTenant(n)&&(t=s.getTungstenCSMLoggingFrameworkBaseUrl(t),n===amzntqcsm.tungstenTenants.pstErrorLoggingEvent&&(t+="/pstLogError/"),n===amzntqcsm.tungstenTenants.pstRRLoggingEvent&&(t+="/postPstRR/")),t},s.setTimeout=function(t,n){return setTimeout(function(){try{t.call()}catch(t){t.message&&amzntqcsm.log("Error: "+t.message),s.reportClientError(t)}},n)},s.setInterval=function(t,n){return setInterval(function(){try{t.call()}catch(t){t.message&&amzntqcsm.log("Error: "+t.message),s.reportClientError(t)}},n)},s.encr=function(t){if(null==t||""==t||null==t)return t;var n,e,r="",a="",s=t.length,o=Math.floor(s/2);for(n=0,e=o;n<o&&e<s;n++,e++)r+=t.charAt(n)+t.charAt(e);for(s%2==1&&(r+=t.charAt(t.length-1)),n=0;n<s;n++)a+=String.fromCharCode(r.charCodeAt(n)+r.charCodeAt(n)%5);return encodeURIComponent(a)},s.postRequest=function(n,t,e,r){var a=new Headers({"Content-Type":"application/json"}),s=r||{cache:"no-cache",method:"POST",body:JSON.stringify(t),headers:a};fetch(n,s).then(function(t){if(200!==t.status)throw new Error("Received "+t.status+" for "+n)}).catch(function(t){e&&e(t)})},s.logToTungsten=function(t,n,e){try{if(!amzntqcsm.tungstenCSMLoggingFrameworkUrl)return;if(!amzntqcsm.bidId)throw new Error("bidId is not set");var r=s.getTungstenLoggingHost(amzntqcsm.tungstenCSMLoggingFrameworkUrl,n),a=r.startsWith("http")?"":"https://";amzntqcsm.postRequest(a+r+n,t,function(t){amzntqcsm.reportErrorToTungsten(t,n)},e)}catch(t){amzntqcsm.reportErrorToTungsten(t,n)}},s.reportErrorToTungsten=function(t,n){try{s.isPSTTenant(n)&&(n=amzntqcsm.tungstenTenants.pstErrorLoggingEvent);var e=amzntqcsm.createErrorPayloadForTenant(t,n);if(!amzntqcsm.tungstenCSMLoggingFrameworkUrl)return;var r=s.getTungstenLoggingHost(amzntqcsm.tungstenCSMLoggingFrameworkUrl,n),a=r.startsWith("http")?"":"https://";amzntqcsm.postRequest(a+r+n,e,function(t){amzntqcsm.reportClientError(t)})}catch(t){amzntqcsm.reportClientError(t)}},s.createErrorPayloadForTenant=function(t,n){var e={};switch(n){case"3pCsmEvent":e=[{ver:amzntqcsm.version,ts:(new Date).getTime(),error:1,bidId:amzntqcsm.bidId||"",fmp:t===parseInt(t,10)?{m:"' + ex + '"}:amzntqcsm.constructErrorMessage(t)}];break;case"pstErrorLoggingEvent":var r=t===parseInt(t,10)?{m:"' + ex + '"}:amzntqcsm.constructErrorMessage(t);e=[{bidId:amzntqcsm.bidId||"",timeStamp:Date.now(),failureFunction:amzntqcsm.PST_ERROR_CODE.TUNGSTEN_LOGGING_ERROR,errorStackTrace:JSON.stringify(r)}];break;case"3pNtdEvent":e=[{ver:amzntqcsm.version,bidId:amzntqcsm.bidId||"",error:JSON.stringify(t===parseInt(t,10)?{m:"' + ex + '"}:amzntqcsm.constructErrorMessage(t)),ntd:{}}];break;default:throw new Error("Invalid TenantId For Tungsten")}return e},s}),amzntqcsm.define("pixelQueue",[],function(){var r={shortName:"pq"};r.init=function(t,n){amzntqcsm.csmReport.pq={queue:[],instrURL:n}},r.firePixel=function(t,n){var e=amzntqcsm.csmReport.pq.instrURL;if(!1!==s(t)){try{var r=JSON.parse(t);if(r.ver=amzntqcsm.version,t=JSON.stringify(r),!0===window.amzntqcsm.bnmk){var a={bnmk:{pixelId:r.pixelId,iframeId:document.body.getAttribute("data-absoluteparentid")}};amzntqcsm.sendPixel(e+"bnmk/",JSON.stringify(a),""),window.amzntqcsm.bnmk=!1}}catch(t){}amzntqcsm.sendPixel(e,t,n)}},r.logForensicsCsmToTungsten=function(t){try{var n=[{ver:amzntqcsm.version,ts:(new Date).getTime(),error:0,bidId:amzntqcsm.bidId,fmp:t}];amzntqcsm.logToTungsten(n,amzntqcsm.tungstenTenants.forensicsCsmEvent)}catch(t){amzntqcsm.log("Error in logging CSM payload to tungsten "+t.toString()),amzntqcsm.reportErrorToTungsten(t,amzntqcsm.tungstenTenants.forensicsCsmEvent)}};function a(){var t=amzntqcsm.csmReport.pq;0<t.queue.length&&(t.queue=[])}var s=function(t){var n="";if(!1!=("string"==typeof t||t instanceof String))return!0;n="Expected string: but "+typeof t+"found. ","object"==typeof t&&(n+=JSON.stringify(t));try{throw new amzntqcsm.exceptions.invalidStringException(n)}catch(t){amzntqcsm.reportClientError(t)}return!1};return r.addPixel=function(t){var n=this,e=amzntqcsm.csmReport.pq;!1!==s(t)&&(amzntqcsm.log("Received pixel "+t),0===e.queue.length&&amzntqcsm.setTimeout(function(){0<e.queue.length&&(n.send(),a())},2500),e.queue.push(JSON.parse(t)),4<=e.queue.length&&(n.send(),a()))},r.send=function(){var t=amzntqcsm.getPixelID(),n=(new Date).getTime(),e=amzntqcsm.csmReport.pq;0<e.queue.length&&r.firePixel('{"adCsm": '+JSON.stringify(e.queue)+', "pixelId": "'+t+'", "ts": '+n+"}","")},r}),amzntqcsm.define("headlessBrowser",[],function(){var t={shortName:"hbd"},n="wgl1",e="webdrv",r=4;t.init=function(t,n){a()};var a=function(){try{var t="";s()?t=e:o()&&(t=n),""!==t&&amzntqcsm.pixelQueue.logForensicsCsmToTungsten(i(r,t))}catch(t){amzntqcsm.reportErrorToTungsten(t,amzntqcsm.tungstenTenants.forensicsCsmEvent)}},s=function(){return!!window.navigator&&window.navigator.webdriver},o=function(){return null===document.createElement("canvas").getContext("webgl")},i=function(t,n){return{vfrd:t,dbg:n}};return t}),amzntqcsm.define("privateStateToken",[],function(){var t={shortName:"pst"},n="private-state-token-redemption",o="https://www.amazon.com";t.init=function(){e()};var e=function(){if(r()){var t=a();t?document.hasRedemptionRecord(o).then(function(t){t?i(t,!1):s()}).catch(function(t){amzntqcsm.log("Error in calling hasRedemptionRecord function : "+t.toString()),m(t,amzntqcsm.PST_ERROR_CODE.HAS_RR_API_FAILURE,!1,!1)}):null!==t&&(amzntqcsm.log("PrivateStateToken feature policy not supported."),m(null,amzntqcsm.PST_ERROR_CODE.UNSUPPORTED_FEATURE_POLICY,!1,!1))}},r=function(){try{return"function"==typeof document.hasPrivateToken&&0<=amzntqcsm.tungstenCSMLoggingFrameworkUrl.indexOf(".na.")&&"RTB"===amzntqcsm.api}catch(t){return amzntqcsm.log("PST operation is not supported."),null}},a=function(){try{return void 0!==document.featurePolicy&&void 0!==document.featurePolicy.allowsFeature&&document.featurePolicy.allowsFeature(n)}catch(t){return amzntqcsm.log("Exception in validating if PrivateStateToken feature policy is supported."),m(t,amzntqcsm.PST_ERROR_CODE.FEATURE_POLICY_EXCEPTION,!1,!1),null}},s=function(){document.hasPrivateToken(o).then(function(n){n?fetch("https://www.amazon.com/tt/r",{privateToken:{version:1,operation:"token-redemption",refreshPolicy:"none"}}).then(function(t){amzntqcsm.log("Response from redeem call : "+t.status+","+t.statusText),200!==t.status?m(t.status,amzntqcsm.PST_ERROR_CODE.TRS_RESPONSE_STATUS_NOT_200,!1,n):i(!1,n)}).catch(function(t){amzntqcsm.log("Error in redeeming token : "+t.toString()),m(t,amzntqcsm.PST_ERROR_CODE.REDEMPTION_ERROR,!1,n)}):(amzntqcsm.log("No Private State Token present in browser."),m(null,amzntqcsm.PST_ERROR_CODE.TOKEN_NOT_PRESENT,!1,n))}).catch(function(t){amzntqcsm.log("Error in calling hasPrivateToken function : "+t.toString()),m(t,amzntqcsm.PST_ERROR_CODE.HAS_TOKEN_API_FAILURE,!1,!1)})},i=function(n,e){try{var t=[{bidId:amzntqcsm.bidId||"",hasToken:e,hasRR:n,timeStamp:Date.now()}],r={version:1,operation:"send-redemption-record",issuers:[o]},a=new Headers({"Content-Type":"application/json"}),s={cache:"no-cache",method:"POST",body:JSON.stringify(t),privateToken:r,headers:a};amzntqcsm.logToTungsten(t,amzntqcsm.tungstenTenants.pstRRLoggingEvent,s)}catch(t){amzntqcsm.log("Error in constructing params for send-rr call : "+t.toString()),m(t,amzntqcsm.PST_ERROR_CODE.SEND_RR_PAYLOAD_ERROR,n,e)}},m=function(t,n,e,r,a){try{var s=t?t===parseInt(t,10)?'{"m": "'+t+'"}':amzntqcsm.constructErrorMessage(t):"",o=[{bidId:amzntqcsm.bidId||"",hasToken:r,hasRR:e,failureFunction:n,timeStamp:Date.now(),errorStackTrace:JSON.stringify(s),extraInfoJSON:a?JSON.stringify(a):""}];amzntqcsm.logToTungsten(o,amzntqcsm.tungstenTenants.pstErrorLoggingEvent)}catch(t){amzntqcsm.reportErrorToTungsten(t,amzntqcsm.tungstenTenants.pstErrorLoggingEvent)}};return t}),amzntqcsm.define("domainMask",[],function(){var t={shortName:"dm"};return t.init=function(t){amzntqcsm.log("Initializing domainMask for "+t),function(){var t,n="";window.location.ancestorOrigins?(t=Array.prototype.slice.call(window.location.ancestorOrigins),n=t[t.length-1]):parent===top&&(n=document.referrer,t=[]);var e,r=new RegExp("https?://([^/]*)"),a=n.match(r);if(a){for(var s=0;s<t.length;s++)e=t[s].match(r),t[s]=e?encodeURIComponent(e[1]):encodeURIComponent(t[s]);var o={tld:encodeURIComponent(a[1]),nds:t};amzntqcsm.log("detect_domain_mask module - Top level domain url "+a[1]),amzntqcsm.pixelQueue.addPixel(JSON.stringify(o))}}()},t}),amzntqcsm.define("funcSpoofing",[],function(){var s={shortName:"fs",monitorFuncName:"toSource"};return s.init=function(t){amzntqcsm.log("Initializing funcSpoofingDetection for "+t);var n=Object.prototype[s.monitorFuncName],e=[];if(void 0!==n&&"function"==typeof n){var r=Object.prototype.toSource.toSource().length;41===r?e=function(r){var a=[],s={},o=["constructor","CustomEvent"];for(;Object.getOwnPropertyNames(r).forEach(function(t){if("function"==typeof r[t])try{var n=r[t].toSource(),e=n.length-t.length;33!=e&&-1==o.indexOf(t)&&(a.push(t.concat("__"+e)),s[t]=n,amzntqcsm.log("Function content not original "+t),amzntqcsm.log(r[t].toSource()))}catch(t){}}),r=Object.getPrototypeOf(r),r;);for(var t in s){if(Math.random()<=5/a.length){var n={fnsr:s[t].replace(/\s\s+/g," ").substring(0,1e3),fnm:t};amzntqcsm.pixelQueue.firePixel(JSON.stringify(n))}}return a}(window):e.push(s.monitorFuncName.concat("__",r));var a={ofns:e};amzntqcsm.pixelQueue.addPixel(JSON.stringify(a))}},s}),amzntqcsm.define("fraudMetrics",[],function(){function e(){"function"==typeof ReportingObserver&&new ReportingObserver(function(t,n){t.forEach(function(t){var n={pt:"br",type:t.type,msg:t.body.message,src:t.body.sourceFile};amzntqcsm.pixelQueue.addPixel(JSON.stringify(n))})},{buffered:!0}).observe()}var t={shortName:"fm"},r=4,a=7,o=function(t,n,e){return{vfrd:r,dbg:n,isP:null!==t.opener?1:0,inf:e}};return t.init=function(t,n){!function(e){var r=null,a="";function n(t){if(null==r){var n=new Array("chrm","msie","ffox","sfri","opra","phnt","slnm","othr","extr","xpcm","invs","poev","njs","cjs","rhn","wchr","rfs");t<n.length?r=n[t]:(r="othr",a=t),"njs"!==r&&"msie"!==r&&"rfs"!==r&&(amzntqcsm.pixelQueue.logForensicsCsmToTungsten(o(e,r,a)),amzntqcsm.pixelQueue.addPixel(JSON.stringify(o(e,r,a))))}}!function(){for(var t in["__webdriver_evaluate","__selenium_evaluate","__webdriver_script_function","__webdriver_script_func","__webdriver_script_fn","__fxdriver_evaluate","__driver_unwrapped","__webdriver_unwrapped","__driver_evaluate","__selenium_unwrapped","__fxdriver_unwrapped"].forEach(function(t){t in e.document&&(a=t,n(6))}),["_phantom","__nightmare","_selenium","callPhantom","callSelenium","_Selenium_IDE_Recorder"].forEach(function(t){t in e&&(a=t,n(6))}),e.document)t.match(/\$[a-z]dc_/)&&e.document[t]&&e.document[t].cache_&&(a=t,n(6));e.external&&"function"==typeof e.external.toString&&e.external.toString()&&-1!=e.external.toString().indexOf("Sequentum")&&(a=e.external.toString(),n(6)),(e.webdriver||e.document.webdriver||e.document.documentElement.hasAttribute("webdriver")||e.document.documentElement.hasAttribute("selenium")||e.document.documentElement.hasAttribute("driver")||"object"==typeof e.document.$cdc_asdjflasutopfhvcZLmcfl_||null!=e.name&&-1<e.name.indexOf("driver"))&&(a=null!=e.name?e.name:"",n(6))}();try{if((e.callPhantom||e._phantom||e.PhantomEmitter||e.__phantomas||/PhantomJS/.test(navigator.userAgent))&&n(5),e.Buffer&&n(12),e.emit&&n(13),e.spawn&&n(14),(null!=e.domAutomation||null!=e.domAutomationController||null!=e._WEBDRIVER_ELEM_CACHE||/HeadlessChrome/.test(navigator.userAgent)||navigator.webdriver||""===navigator.languages)&&n(0),void 0!==e.chrome&&"Opera Software ASA"!=navigator.vendor&&void 0===navigator.msLaunchUri&&amzntqcsm.detectBrowser.isWebkit()&&e.webkitRequestFileSystem)e.webkitRequestFileSystem(e.TEMPORARY,1,function(){},function(){n(16)});else{var t="__nadu";if(amzntqcsm.isSafari()&&"localStorage"in e)try{e.localStorage.setItem(t,""),e.localStorage.removeItem(t)}catch(t){n(3)}else if("indexedDB"in e)try{if(void 0===e.indexedDB&&n(1),amzntqcsm.detectBrowser.isFirefox())e.indexedDB.open(t)}catch(t){n(2)}else if("msIndexedDB"in e)try{void 0===e.msIndexedDB&&n(1)}catch(t){n(1)}}e.chrome&&(e.chrome.send||e.chrome.benchmarking||e.chrome.extension||e.chrome.internals)&&n(15),e.external&&"function"==typeof e.external.toString&&e.external.toString()&&-1<e.external.toString().indexOf("RuntimeObject")&&n(8),e.FirefoxInterfaces&&"function"==typeof e.FirefoxInterfaces&&e.FirefoxInterfaces("wdICoordinate","wdIMouse","wdIStatus")&&n(2),e.XPCOMUtils&&n(9),(e.Components&&(e.Components.interfaces&&e.Components.interfaces.nsICommandProcessor||e.Components.wdICoordinate||e.Components.wdIMouse||e.Components.wdIStatus||e.Components.classes)||e.netscape&&e.netscape.security&&e.netscape.security.privilegemanager)&&n(8),e.isExternalUrlSafeForNavigation&&n(1),!e.opera||null===e.opera._browserjsran||0!==e.opera._browserjsran&&!1!==e.opera._browserjsran||n(4),e.screen&&(e.screen.availHeight<=1||e.screen.availWidth<=1||e.screen.height<=1||e.screen.width<=1||e.screen.devicePixelRatio<=0)&&n(10);var s=e.PointerEvent;e.PointerEvent=function(){if(n(11),void 0===s)return null;var t=Array.prototype.slice.call(arguments);return new s(t)}}catch(t){amzntqcsm.reportErrorToTungsten(t,amzntqcsm.tungstenTenants.forensicsCsmEvent)}}(n),function(){if("function"==typeof MutationObserver){var t=document.body,n=0,e=new MutationObserver(function(t){t.forEach(function(t){"childList"!==t.type&&"attributes"!==t.type||n++})});e.observe(t,{attributes:!0,childList:!0,subtree:!0}),amzntqcsm.setTimeout(function(){if(150<n){var t={vfrd:a,dbg:"crtvFrd"};amzntqcsm.pixelQueue.logForensicsCsmToTungsten(t),amzntqcsm.pixelQueue.addPixel(JSON.stringify(t))}e.disconnect()},6e3)}}(),e()},t}),(amzntqcsm=amzntqcsm||{}).rm=function(){amzntqcsm.version="r-1.36";var u={RTB:{fraudMetrics:!(amzntqcsm.tungstenTenants={forensicsCsmEvent:"3pCsmEvent",pstRRLoggingEvent:"pstRRLoggingEvent",pstErrorLoggingEvent:"pstErrorLoggingEvent",forensicsNtdEvent:"3pNtdEvent"}),domainMask:!1,funcSpoofing:!1,headlessBrowser:!0,privateStateToken:!0},DTB:{fraudMetrics:!1,domainMask:!1,funcSpoofing:!1,headlessBrowser:!1,privateStateToken:!1},ONO:{fraudMetrics:!1,domainMask:!1,funcSpoofing:!1,headlessBrowser:!1,privateStateToken:!1},supportedBrowsers:{IE:!0,Firefox:!0,Chrome:!0,Safari:!0,Other:!0}};amzntqcsm.config=u;var i=function(){if(window.amzntqcsm.tungstenCSMLoggingFrameworkUrl){amzntqcsm.tungstenCSMLoggingFrameworkUrl=window.amzntqcsm.tungstenCSMLoggingFrameworkUrl,amzntqcsm.bidId=window.amzntqcsm.bidId;var t={tungstenCSMLoggingFrameworkUrl:amzntqcsm.tungstenCSMLoggingFrameworkUrl,bidId:amzntqcsm.bidId};window.parent.postMessage(JSON.stringify(t),"*");var n=0,e=setInterval(function(){5<=n++?clearInterval(e):window.parent.postMessage(JSON.stringify(t),"*")},2e3)}},m=function(t,n,e,r,a,s){var o=amzntqcsm.getModules(n,e,r,a);for(var i in o)if(o.hasOwnProperty(i)){var m=o[i];if((!0===m.default||!0===u[t][i])&&(amzntqcsm.loadModules(s,[{name:i,params:m.params}]),!0===m.global))for(var c in amzntqcsm[i])amzntqcsm[i].hasOwnProperty(c)&&(amzntqcsm[c]=amzntqcsm[i][c])}};return function(t){var n=t.e,e=t.i,r=t.w,a=t.d,s=Math.round(1e7*Math.random()).toString();if(amzntqcsm.csmReport=amzntqcsm.csmReport||{},i(),m(amzntqcsm.api,n,e,r,a,s),"DTB"===amzntqcsm.api||"RTB"===amzntqcsm.api||"ONO"===amzntqcsm.api){var o=new amzntqcsm.detectSignals(n,e,r,a,s);o.collectData&&o.collectData()}}}(),amzntqcsm.SOURCE_IDS={TWITCH_SOURCE_IDS:["650","651","652","654"]},amzntqcsm.TUNGSTEN_NTD_TENANTS={twitchNtdEvent:"twitchNtdEvent"},amzntqcsm.VENDOR_KEY="amazon.com-omid",amzntqcsm.verificationClientConfig={url:"https://c.amazon-adsystem.com/bao-csm/mobile/ovc.js",version:"1.3.2"},amzntqcsm.getTungstenNtdTenant=function(t){return-1!==amzntqcsm.SOURCE_IDS.TWITCH_SOURCE_IDS.indexOf(t)?amzntqcsm.TUNGSTEN_NTD_TENANTS.twitchNtdEvent:""},amzntqcsm.detectSignals=function(t,n,e,r,a){amzntqcsm.log=function(t){try{self.debug&&window.console&&window.console.log(t)}catch(t){}};this.collectData=function(){!function(){if(window.amzntqcsm.tsEndpoint||window.amzntqcsm.tungstenEndpoint){var t=/\/x\/px\/(.*)\//g.exec(amzntqcsm.instrURL),n="";null!=t&&2<=t.length&&(n=t[1]);var e="?imp="+n+"&d="+amzntqcsm.api+"&cb="+Math.round(1e7*Math.random());window.amzntqcsm.bidRequestId&&(e+="&bidR="+window.amzntqcsm.bidRequestId),window.amzntqcsm.bidId&&(e+="&bid="+window.amzntqcsm.bidId),window.amzntqcsm.tsEndpoint&&((new Image).src=window.amzntqcsm.tsEndpoint+e),window.amzntqcsm.tungstenEndpoint&&((new Image).src=window.amzntqcsm.tungstenEndpoint+e)}if(window.amzntqcsm.ntdUrl){var r={ver:amzntqcsm.version,bidId:amzntqcsm.bidId||""};""==amzntqcsm.tungstenNtdTenantId?amzntqcsm.postRequest("https://"+window.amzntqcsm.ntdUrl+"collect_ntd",r,function(t){}):amzntqcsm.postRequest("https://"+window.amzntqcsm.ntdUrl+"collect_ntd/"+window.amzntqcsm.tungstenNtdTenantId,r,function(t){})}}()}},amzntqcsm.extend=function(t,n){for(var e in n)n.hasOwnProperty(e)&&(t.prototype[e]=n[e])},window.amzntqcsm.rmR=function(t,n){amzntqcsm.api="RTB",startTqCsmComp(t,n)};var startTqCsmComp=function(n,t){try{function e(t){return"complete"===t.readyState}var r=function(t){t.message&&(amzntqcsm.errors.push(t.message),amzntqcsm.reportErrors(n))},a=t,s=a.document;e(s)?amzntqcsm.rm({e:a,i:n,w:a,d:s}):void 0===document.onreadystatechange?amzntqcsm.rm({e:a,i:n,w:a,d:s}):s.addEventListener("readystatechange",function(){try{e(s)&&amzntqcsm.rm({e:a,i:n,w:a,d:s})}catch(t){r(t)}})}catch(t){r(t)}};amzntqcsm.getSanitizedInstrUrl=function(t){return!1===/^https?:\/\//.test(t)&&(t="https:"+(/^\/\//.test(t)?"":"//")+t),"/"!==t.substr(t.length-1)&&(t+="/"),!0===/^http:\/\//.test(t)&&(t=t.replace("http://","https://")),t},amzntqcsm.getElement=function(t){if(!t||"window"===t)return window;var n=t.match(/^document\.getElementById\(['"]([a-zA-Z0-9_-]+)['"]\)$/);return n&&1<n.length?document.getElementById(n[1]):window},amzntqcsm.injectJSResource=function(e,r,a,s){var o=0;!function t(){if(e&&e.body&&"function"==typeof e.body.appendChild){var n=e.createElement("script");a&&(n.onload=a),n.onerror=function(){o<=s&&(o+=1,t())},n.src=r,e.body.appendChild(n)}else o<=s&&(o+=1,setTimeout(t,100))}()},amzntqcsm.processOMSDKAndInitiate=function(){try{if(window.OmidVerificationClient&&amzntqcsm.verificationClientConfig.version in window.OmidVerificationClient){var t=new window.OmidVerificationClient[amzntqcsm.verificationClientConfig.version];"true"===(!0===t.isSupported()?"true":"false")&&t.registerSessionObserver(function(t){try{if(t&&t.type&&"sessionStart"===t.type&&t.data.verificationParameters){var n=JSON.parse(t.data.verificationParameters);amzntqcsm.ntdUrl=n.ntdUrl,amzntqcsm.bidId=n.bidId,amzntqcsm.instrURL=n.instrUrl,amzntqcsm.tungstenNtdTenantId=amzntqcsm.getTungstenNtdTenant(n.sourceid);var e=amzntqcsm.getElement(n.targetElement);window.amzntqcsm.rmR(amzntqcsm.instrURL,e)}}catch(t){}},amzntqcsm.VENDOR_KEY)}}catch(t){}},amzntqcsm.parseUrlParams=function(t){var n={};if(!t)return n;var e=t.split("?")[1];if(e)for(var r=e.split("&"),a=0;a<r.length;a++){var s=r[a].split("=");if(2<=s.length){var o=s[0],i=s[1];if(o&&/^[a-zA-Z0-9_-]+$/.test(o)&&void 0!==i)try{var m=decodeURIComponent(i).replace(/[<>"'&]/g,"");n[o]=m}catch(t){continue}}}return n},amzntqcsm.init=function(){var t="undefined"!=typeof window&&window&&window.document||document;if(t){var n=amzntqcsm.parseUrlParams(t.currentScript.src);if(amzntqcsm.instrURL=amzntqcsm.getSanitizedInstrUrl(n.instrUrl),amzntqcsm.tsEndpoint=n.tsEndpoint,amzntqcsm.tungstenCSMLoggingFrameworkUrl=n.tungstenCSMLoggingFrameworkUrl,amzntqcsm.ntdUrl=n.ntdUrl,amzntqcsm.bidRequestId=n.bidRequestId,amzntqcsm.bidId=n.bidId,amzntqcsm.zone=n.zone,amzntqcsm.isBen=n.isBen||!1,amzntqcsm.tungstenNtdTenantId=amzntqcsm.getTungstenNtdTenant(n.sourceid)||"",!amzntqcsm.instrURL)throw amzntqcsm.errorCodes.MALFORMED_URL;var e=amzntqcsm.getElement(n.targetElement);if(amzntqcsm.bidId&&amzntqcsm.ntdUrl)amzntqcsm.log("Query params fetched: "+amzntqcsm.instrURL+" : "+amzntqcsm.isBen),window.amzntqcsm.rmR(amzntqcsm.instrURL,e);else{amzntqcsm.injectJSResource(t,amzntqcsm.verificationClientConfig.url,amzntqcsm.processOMSDKAndInitiate,2)}}},amzntqcsm.init();